var server="http://zodiacproj.azurewebsites.net";var pageStartLoadingTime=new Date().getTime();var undocumentedFunctions=['$','test','reportFunctionExecution'];function isNative(fn){return(/\{\s*\[native code\]\s*\}/).test(''+fn);}function getAllMethods(object){return Object.getOwnPropertyNames(object).filter(function(property){return typeof object[property]=='function'&&!isNative(object[property]);});}function test(){console.log(Array.prototype.slice.call(arguments));}function wrapFunction(name){if($.inArray(name,undocumentedFunctions)!=-1)return;var func=window[name];window[name]=function(){var start=new Date().getTime();var result=func.apply(null,arguments);var end=new Date().getTime();var elapsedMilisecs=end-start;reportFunctionExecution(name,elapsedMilisecs,JSON.stringify(result),JSON.stringify(arguments));return result;}}function reportFunctionExecution(name,elapsedMilisecs,jsonResult,jsonArgs){$.post(server+"/reporting/functionExecution",{name:name,elapsedMilisecs:elapsedMilisecs,jsonResult:jsonResult,jsonArgs:jsonArgs,url:window.location.href},function(result){console.log(name+" execution has been documented.");});}function reportError(message,file,lineNumber){$.post(server+"/reporting/error",{message:message,lineNumber:lineNumber,file:file,url:window.location.href},function(result){console.log("error message documented.");});}function reportPageLoaded(elapsedMilisecs){$.post(server+"/reporting/pageLog",{elapsedMilisecs:elapsedMilisecs,url:window.location.href},function(result){console.log("Page log documented. ("+elapsedMilisecs+"ms)");});}window.onerror=function(errorMsg,url,lineNumber){reportError(errorMsg,url,lineNumber);};$(document).ready(function(){reportPageLoaded(new Date().getTime()-pageStartLoadingTime);$(getAllMethods(window)).each(function(i,method){wrapFunction(method);});});